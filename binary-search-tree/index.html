<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Binary Search Tree</title>
  </head>
  <body>
    <pre id="root">

    </pre>

    <script>
      class Node {
        constructor(value) {
          this.value = value;
          this.left = null;
          this.right = null;
        }
      }

      class BinarySearchTree {
        constructor() {
          this.root = null;
        }

        insert(value) {
          const newNode = new Node(value);
          if (this.root === null) {
            this.root = newNode;
             return;
          } else {
            let currentNode = this.root;
            while (currentNode) {
              //     *
              //    /
              //   *
              if (newNode.value < currentNode.value) {
                if (!currentNode.left){
                  currentNode.left = newNode;
                  return;
                }
                currentNode = currentNode.left;
              } else {
                //     *
                //      \
                //       *
                if (!currentNode.right) {
                  currentNode.right = newNode;
                  return;
                } 
                currentNode = currentNode.right;
              }
            }
          }
        }

        lookup(value) {
          if (!this.root) {
            return null;
          }
          let currentNode = this.root;
          while (currentNode) {
            if (value === currentNode.value) {
              return currentNode;
            } else if (value < currentNode.value) {
              currentNode = currentNode.left;
            } else {
              currentNode = currentNode.right;
            }
          }
          return null;
        }
      }

      //       9
      //    4      20
      //  1   6  15  170
      const bst = new BinarySearchTree();
      bst.insert(9);
      bst.insert(4);
      bst.insert(6);
      bst.insert(20);
      bst.insert(170);
      bst.insert(15);
      bst.insert(1);
      console.log(bst);
      document.querySelector('#root').innerHTML = JSON.stringify(traverse(bst.root), null, 2);
      
      console.log(bst.lookup(170));
      console.log(bst.lookup(171));
      console.log(bst.lookup(4));

      function traverse(node) {
        const tree = { value: node.value };
        tree.left = node.left === null ? null : traverse(node.left);
        tree.right = node.right === null ? null : traverse(node.right);
        return tree;
      }
    </script>
  </body>
</html>
